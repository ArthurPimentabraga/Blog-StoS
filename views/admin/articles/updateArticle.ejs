<%- include ('../../partials/header.ejs')%>
<%- include ('../../partials/navbar.ejs')%>

<main>
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h2>Editar artigo</h2>
                    </div>
                    <div class="card-body">
                        <form action="/admin/articles/update" method="POST">
                            <div class="row">
                                <div class="col-6">
                                    <label>TÃ­tulo: </label>
                                    <input type="text" name="title" class="form-control" value="<%= article.title %>">
                                </div>
                                <div class="col-6">
                                    <label>Categoria: </label>
                                    <select name="category" id="category" class="form-control">
                                        <% categories.forEach((category) => { %>
                                            <% if(category.id == article.category.id) { %>
                                                <option value="<%= category.id %>" selected><%= category.title %></option>
                                            <% }else{ %>
                                                <option value="<%= category.id %>"><%= category.title %></option>
                                            <% } %>
                                        <% }) %>
                                    </select>
                                </div>
                            </div>
                            <br>
                            <textarea name="body" id="article" class="form-control" cols="30" rows="15"
                                placeholder="Escreva seu artigo aqui"><%= article.body %></textarea>
                            <br>
                            <input type="hidden" name="id" value="<%= article.id %>">
                            <button class="btn btn-success float-right">Atualizar</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<%- include ('../../partials/footer.ejs')%>
<script src="https://cdn.tiny.cloud/1/uem138bvkor6845att85xzwmikiihxldg2jdek3dcsqvfrre/tinymce/5/tinymce.min.js"
    referrerpolicy="origin">
</script>

<script>
    tinymce.init({
        selector: '#article',
        plugins: [
            `advlist
            autolink
            link
            image
            lists
            print
            preview
            hr
            searchplace
            wordcount
            fullscreen 
            insertdatetime
            media
            save
            table
            paste
            emoticons`
        ]
    })
</script>